<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sean Kim - Personal Website</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main>
      <section class="hero">
        <img src="profile-photo.svg" alt="Your Name" class="profile-photo" />
        <h1>Sean Kim</h1>
        <p class="tagline">
          Cloud Builder & AWS Enthusiast & Passionate LoL player
        </p>
        <a
          href="https://builder.aws.com/community/@seandk93"
          target="_blank"
          class="aws-link"
          >AWS Builder Center Profile</a
        >

        <!-- League of Legends Account Info -->
        <div class="lol-account-section">
          <h3>My League of Legends Profile</h3>

          <!-- Loading Spinner -->
          <div id="profile-loading" class="profile-loading">
            <div class="spinner"></div>
            <p>Loading profile data...</p>
          </div>

          <!-- Profile Content -->
          <div id="profile-content" style="display: none;">
            <div class="lol-profile-container">
              <!-- Summoner Info Card -->
              <div class="lol-summoner-card">
                <div class="summoner-header">
                  <div class="summoner-icon">
                    <img id="summoner-icon" src="https://via.placeholder.com/100x100/c89b3c/ffffff?text=Icon" alt="Summoner Icon" />
                  </div>
                  <div class="summoner-details">
                    <h4 class="summoner-name">seandk</h4>
                    <p class="summoner-tag">#OCE</p>
                    <p id="summoner-level" class="summoner-level">Level 456</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Recent Match History -->
            <div class="match-history">
              <h4>Recent Matches</h4>
              <div id="matches-container" class="matches-container">
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="fun-facts">
        <h3>Fun Facts About Me</h3>
        <div class="facts-grid">
          <div class="fact-card">
            <h4>üöÄ Challenge In Progress</h4>
            <p>
              Currently working on
              <a
                href="https://builder.aws.com/content/31C2WxIDSQive7q2Dv5xNFCmYJj/aws-builder-challenge-2-build-a-website-on-the-cloud?trk=86c76c09-e8f4-4138-badc-604ce7bc5d77&sc_channel=el"
                target="_blank"
                >AWS Builder Challenge #2: Build a website on the cloud!</a
              >
            </p>
          </div>
          <div class="fact-card">
            <h4>üéØ Learning Goal</h4>
            <p>
              Exploring AWS AI services including Bedrock and SageMaker to build intelligent cloud applications
            </p>
          </div>
          <div class="fact-card">
            <h4>üí° Fun Project</h4>
            <p>
              This website is powered by AWS Amplify with serverless functions that integrate with the Riot Games API
            </p>
          </div>
        </div>
      </section>

      <section class="aws-journey">
        <h3>AWS Builder Challenge #2</h3>
        <p>
          I'm currently working on the "Build a website on the cloud" challenge,
          learning to deploy websites using AWS S3 and CloudFront. This site is
          part of my challenge progress!
        </p>
        <a
          href="https://builder.aws.com/content/31C2WxIDSQive7q2Dv5xNFCmYJj/aws-builder-challenge-2-build-a-website-on-the-cloud?trk=86c76c09-e8f4-4138-badc-604ce7bc5d77&sc_channel=el"
          target="_blank"
          class="cta-button"
          >View Challenge Details</a
        >
      </section>

      <!-- CONTACT FORM SECTION - Added for user contact functionality -->
      <section class="contact-form">
        <h3>Get In Touch</h3>
        <p>Have a question or want to connect? Send me a message!</p>
        <!-- Form message container for success/error messages -->
        <div id="form-message" class="form-message" style="display: none"></div>
        <form class="contact-form-container">
          <!-- Contact form input fields -->
          <div class="form-group">
            <label for="name">Name</label>
            <input type="text" id="name" name="name" required />
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" required />
          </div>
          <div class="form-group">
            <label for="message">Message</label>
            <textarea id="message" name="message" rows="5" required></textarea>
          </div>
          <!-- Contact form submit button -->
          <button type="submit" class="contact-submit-btn">Send Message</button>
        </form>
      </section>
      <!-- END CONTACT FORM SECTION -->
      <!-- LEAGUE DATA LOOKUP SECTION -->
      <section class="league-lookup">
        <h3>League Data Lookup</h3>
        <p>Enter a Riot ID to see their level and top champions!</p>

        <!-- Lookup message container for success/error messages -->
        <div
          id="lookup-message"
          class="lookup-message"
          style="display: none"
        ></div>

        <div class="lookup-form-container">
          <!-- Riot ID lookup form -->
          <div class="form-group">
            <label for="summoner-name">Riot ID</label>
            <input
              type="text"
              id="summoner-name"
              name="summoner-name"
              placeholder="GameName#TAG (e.g., Hide on bush#KR1)"
              required
            />
            <small style="color: #687078; display: block; margin-top: 4px"
              >Format: GameName#TAG</small
            >
          </div>
          <div class="form-group">
            <label for="region">Region</label>
            <select id="region" name="region">
              <option value="na1">North America</option>
              <option value="euw1">Europe West</option>
              <option value="eun1">Europe Nordic & East</option>
              <option value="kr">Korea</option>
              <option value="br1">Brazil</option>
              <option value="la1">Latin America North</option>
              <option value="la2">Latin America South</option>
              <option value="oc1">Oceania</option>
              <option value="tr1">Turkey</option>
              <option value="ru">Russia</option>
              <option value="jp1">Japan</option>
            </select>
          </div>
          <!-- Lookup submit button -->
          <button type="button" id="lookup-btn" class="lookup-submit-btn">
            Look Up Summoner
          </button>
        </div>

        <!-- Results display area -->
        <div
          id="summoner-results"
          class="summoner-results"
          style="display: none"
        >
          <h4>Summoner Info</h4>
          <div id="summoner-info"></div>
          <div id="champion-mastery"></div>
        </div>
      </section>
      <!-- END LEAGUE DATA LOOKUP SECTION -->
    </main>

    <footer>
      <p>&copy; 2025 Sean Kim. Built with ‚ù§Ô∏è on AWS</p>
    </footer>

    <!-- Contact form JavaScript -->
    <script src="script.js"></script>
    <script>
      // League Data Lookup - Calls Riot API via Lambda
      const RIOT_API_URL =
        'https://uj2tjezxirzjz3jupprboi3s7a0qfcxd.lambda-url.ap-southeast-2.on.aws/'; // For lookup functionality
      const PROFILE_DATA_URL =
        'https://xwy2qmro3ah5dslbcksiwa5b7y0hcoqy.lambda-url.ap-southeast-2.on.aws/'; // For profile data

      // Stub data to use as fallback
      const STUB_DATA = {
        summoner: {
          level: 456,
          profileIconId: 6316
        },
        recentMatches: [
          {
            matchId: "OC1_680586112",
            gameMode: "ARAM",
            gameDuration: 1143,
            championName: "Naafiri",
            kills: 18,
            deaths: 9,
            assists: 22,
            win: true,
            kda: "4.44"
          },
          {
            matchId: "OC1_680579732",
            gameMode: "ARAM",
            gameDuration: 1215,
            championName: "JarvanIV",
            kills: 11,
            deaths: 10,
            assists: 41,
            win: false,
            kda: "5.20"
          },
          {
            matchId: "OC1_680580037",
            gameMode: "ARAM",
            gameDuration: 836,
            championName: "Yasuo",
            kills: 11,
            deaths: 6,
            assists: 22,
            win: true,
            kda: "5.50"
          },
          {
            matchId: "OC1_680575540",
            gameMode: "ARAM",
            gameDuration: 1044,
            championName: "Ryze",
            kills: 15,
            deaths: 7,
            assists: 6,
            win: false,
            kda: "3.00"
          },
          {
            matchId: "OC1_680574547",
            gameMode: "ARAM",
            gameDuration: 994,
            championName: "Sion",
            kills: 10,
            deaths: 7,
            assists: 21,
            win: true,
            kda: "4.43"
          }
        ]
      };

      // Load profile data on page load
      async function loadProfileData() {
        try {
          const response = await fetch(PROFILE_DATA_URL);
          const data = await response.json();

          if (response.ok && data.body) {
            const parsedData = JSON.parse(data.body);
            displayProfileData(parsedData);
          } else {
            throw new Error('Failed to fetch profile data');
          }
        } catch (error) {
          console.error('Error loading profile:', error);
          // Use stub data on error
          displayProfileData(STUB_DATA);
        }
      }

      function displayProfileData(data) {
        // Hide loading spinner
        document.getElementById('profile-loading').style.display = 'none';

        // Update summoner level
        document.getElementById('summoner-level').textContent = `Level ${data.summoner.level}`;

        // Update summoner icon
        const iconUrl = `https://ddragon.leagueoflegends.com/cdn/14.1.1/img/profileicon/${data.summoner.profileIconId}.png`;
        document.getElementById('summoner-icon').src = iconUrl;

        // Display matches
        const matchesContainer = document.getElementById('matches-container');
        matchesContainer.innerHTML = data.recentMatches.map(match => {
          const minutes = Math.floor(match.gameDuration / 60);
          const seconds = match.gameDuration % 60;
          const duration = `${minutes}m ${seconds}s`;

          return `
            <div class="match-card ${match.win ? 'win' : 'loss'}">
              <div class="match-result">${match.win ? 'Victory' : 'Defeat'}</div>
              <div class="match-info">
                <img src="https://via.placeholder.com/48x48/c89b3c/ffffff?text=${match.championName[0]}" alt="${match.championName}" class="match-champion-icon" />
                <div class="match-details">
                  <p class="champion-name">${match.championName}</p>
                  <p class="match-kda">${match.kills} / ${match.deaths} / ${match.assists}</p>
                  <p class="match-mode">${match.gameMode}</p>
                </div>
              </div>
              <div class="match-stats">
                <p>${duration}</p>
                <p class="kda-ratio">KDA: ${match.kda}</p>
              </div>
            </div>
          `;
        }).join('');

        // Show profile content
        document.getElementById('profile-content').style.display = 'block';
      }

      document.addEventListener('DOMContentLoaded', function () {
        // Load profile data on page load
        loadProfileData();
        const lookupBtn = document.getElementById('lookup-btn');
        const summonerNameInput = document.getElementById('summoner-name');
        const regionSelect = document.getElementById('region');

        lookupBtn.addEventListener('click', async function () {
          const summonerName = summonerNameInput.value.trim();
          const region = regionSelect.value;
          const messageDiv = document.getElementById('lookup-message');
          const resultsDiv = document.getElementById('summoner-results');

          if (!summonerName) {
            showMessage('Please enter a Riot ID', 'error');
            return;
          }

          if (!summonerName.includes('#')) {
            showMessage('Please use Riot ID format: GameName#TAG', 'error');
            return;
          }

          // Show loading state
          lookupBtn.textContent = 'Looking up...';
          lookupBtn.disabled = true;
          messageDiv.style.display = 'none';
          resultsDiv.style.display = 'none';

          try {
            const response = await fetch(RIOT_API_URL, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                summonerName: summonerName,
                region: region,
              }),
            });

            const data = await response.json();

            if (response.ok) {
              displaySummonerData(data);
              showMessage('Summoner found!', 'success');
            } else {
              showMessage(
                data.error || 'Failed to fetch summoner data',
                'error'
              );
            }
          } catch (error) {
            console.error('Error:', error);
            showMessage('Network error. Please try again.', 'error');
          }

          // Reset button
          lookupBtn.textContent = 'Look Up Summoner';
          lookupBtn.disabled = false;
        });

        // Enter key support
        summonerNameInput.addEventListener('keypress', function (e) {
          if (e.key === 'Enter') {
            lookupBtn.click();
          }
        });
      });

      function displaySummonerData(data) {
        const resultsDiv = document.getElementById('summoner-results');
        const summonerInfo = document.getElementById('summoner-info');
        const championMastery = document.getElementById('champion-mastery');

        // Display summoner info
        summonerInfo.innerHTML = `
            <div class="summoner-card">
                <h5>${data.summoner.name}</h5>
                <p>Level: ${data.summoner.level}</p>
            </div>
        `;

        // Display top champions
        if (data.topChampions && data.topChampions.length > 0) {
          const championsHtml = data.topChampions
            .map(
              (champ) => `
                <div class="champion-card">
                    <p><strong>Champion ID:</strong> ${champ.championId}</p>
                    <p><strong>Mastery Level:</strong> ${
                      champ.championLevel
                    }</p>
                    <p><strong>Mastery Points:</strong> ${champ.championPoints.toLocaleString()}</p>
                </div>
            `
            )
            .join('');

          championMastery.innerHTML = `
                <h5>Top Champions</h5>
                <div class="champions-grid">
                    ${championsHtml}
                </div>
            `;
        } else {
          championMastery.innerHTML = '<p>No champion mastery data found.</p>';
        }

        resultsDiv.style.display = 'block';
      }

      function showMessage(text, type) {
        const messageDiv = document.getElementById('lookup-message');
        messageDiv.textContent = text;
        messageDiv.className = `lookup-message ${type}`;
        messageDiv.style.display = 'block';

        // Auto-hide after 10 seconds
        setTimeout(() => {
          messageDiv.style.display = 'none';
        }, 10000);
      }
    </script>
  </body>
</html>
